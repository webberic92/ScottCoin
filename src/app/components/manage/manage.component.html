<div class="center-div">
  <div
    class="card"
    style="
      background-color: black;
      border: 4mm ridge #f0b90b;
      width: 65%;
      min-width: 400px;
    "
  >
    <div class="center-img">
      <br />
      <img
        src="../../../assets/bi_coin.gif"
        alt="unfold"
        height="33%"
        width="33%"
        style="border-radius: 50%"
      />
    </div>
    <div *ngIf="!this.isLoading">
      <p>
        <u>Manage {{ contractName }} ({{ contractSymbol }})</u>
      </p>
      <p style="font-size: 1.25em">
        Token Address: {{ contractAddress }}
        <br />
        https://testnet.bscscan.com/address/0xf4a085B3d7A6720A6Eb1e0820E3C425156fAcD3e

        <br />
        Minted: {{ contractMinted }}
        <br />
        Total Supply : {{ contractTotalSupply }}
        <br />
      </p>

      <div *ngIf="this.userAddress != ''">
        <div *ngIf="this.contractOwner == this.userAddress">
          <br />
          <hr
            style="
              color: #f0b90b;
              width: 85%;
              margin-left: auto;
              margin-right: auto;
            "
          />
          <p><u>OWNER ONLY DASHBOARD</u></p>

          <div class="row" style="margin-left: auto; margin-right: auto">
            <div class="col-xl-4">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  <u> Distribute Rewards. </u><br />
                  <br />

                  Based off 4% a year but 1% can be forced here.
                </p>
                <br />
                <br />
                <br />

                <button
                  class="favorite styled"
                  type="button"
                  (click)="distributeRewards()"
                >
                  Distrbute
                </button>
              </div>
            </div>
            <div
              class="col-xl-4"
              style="grid-template-columns: repeat(auto-fit, minmax(275, auto))"
            >
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  <u> SET NFT ADDRESS </u>
                  <br />

                  Current address : <br />
                  {{ contractERC721Token }}<br />
                </p>
                <div
                  class="form-outline"
                  id="mintInput"
                  style="max-width: 75%; margin-left: auto; margin-right: auto"
                >
                  <input
                    [ngModel]="setERC721Token"
                    (ngModelChange)="erc721Token($event)"
                    type="text"
                    onfocus="this.previousValue = this.value"
                    onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                    class="form-control"
                    placeholder="Address"
                  />
                </div>
                <br />
                <button
                  class="favorite styled"
                  type="button"
                  (click)="setErc721address()"
                >
                  Update
                </button>
              </div>
            </div>
            <div
              class="col-xl-4"
              style="grid-template-columns: repeat(auto-fit, minmax(275, auto))"
            >
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  <u> WITHDRAW. </u><br /><br />
                  <br />{{ contractBnbBalance }} BNB
                </p>
                <br /><br /><br />
                <button
                  class="favorite styled"
                  type="button"
                  (click)="withdrawBNB()"
                >
                  Withdraw
                </button>
              </div>
            </div>

            <div class="col-xl-4">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  <u> SET COST </u><br /><br /><br />

                  Current Price : {{ contractPrice }} BNB
                </p>

                <div
                  class="form-outline"
                  id="mintInput"
                  style="max-width: 75%; margin-left: auto; margin-right: auto"
                >
                  <input
                    [ngModel]="this.setCostvalue"
                    type="number"
                    (ngModelChange)="updatePrice($event)"
                    min=".000001"
                    max="100"
                    step=".000001"
                    onfocus="this.previousValue = this.value"
                    onkeydown="this.previousValue =this.value"
                    class="form-control"
                    placeholder="Cost"
                  />
                </div>

                <br />
                <div class="center-div">
                  <div *ngIf="setCostvalue == ''">
                    <button
                      class="favorite styledDisabled"
                      disabled
                      type="button"
                      (click)="setCost()"
                    >
                      Set Cost
                    </button>
                  </div>
                  <div *ngIf="setCostvalue != ''">
                    <button
                      class="favorite styled"
                      type="button"
                      (click)="setCost()"
                    >
                      Set Cost
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-4">
              <div class="card-body" id="manageCard">
                <p class="card-text" style="font-size: 1em">
                  <u> TRANSFER OWNERSHIP </u>
                  <br /><br />
                  This will transfer ownership of contract.
                </p>
                <div
                  class="form-outline"
                  id="mintInput"
                  style="max-width: 75%; margin-left: auto; margin-right: auto"
                >
                  <input
                    [ngModel]="setNewOwnerAddress"
                    (ngModelChange)="setNewOwner($event)"
                    type="text"
                    onfocus="this.previousValue = this.value"
                    onkeydown=" this.previousValue =this.value"
                    class="form-control"
                    placeholder="Address"
                  />
                </div>
                <br />
                <button
                  *ngIf="setNewOwnerAddress != ''"
                  class="favorite styled"
                  type="button"
                  (click)="newOwner()"
                >
                  Transfer Ownership
                </button>
                <button
                  *ngIf="setNewOwnerAddress == ''"
                  class="favorite styledDisabled"
                  type="button"
                >
                  Transfer Ownership
                </button>
              </div>
            </div>
          </div>
        </div>

        <hr
          style="
            color: #f0b90b;
            width: 85%;
            margin-left: auto;
            margin-right: auto;
          "
        />
        <p>
          <u>USER DASHBOARD</u> <br />{{ userAddress }}<br />
          Your {{ contractSymbol }} : {{ tokensOwned }}
          <br />
          Staked {{ contractSymbol }} : {{ tokensStaked }}
        </p>

        <div class="row">
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> BURN </u><br /><br />
                Burn Tokens.
              </p>
              <br />
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setBurnAmount"
                  type="number"
                  (ngModelChange)="setBurn($event)"
                  min="0"
                  max="100000000000"
                  step="1"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Burn"
                />
              </div>
              <br />
              <button
                *ngIf="setBurnAmount != ''"
                class="favorite styled"
                type="button"
                (click)="burn()"
              >
                Burn
              </button>
              <button
                *ngIf="setBurnAmount == ''"
                class="favorite styledDisabled"
                type="button"
              >
                Burn
              </button>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> STAKE </u>
                <br />
                Has to be more than 100. In order to get 1%.<br />
              </p>
              <br />
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setStakeAmount"
                  type="number"
                  (ngModelChange)="setStake($event)"
                  min="100"
                  max="100000000000"
                  step="1"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Stake"
                />
              </div>
              <br />

              <div class="center-div">
                <button
                  *ngIf="setStakeAmount != ''"
                  class="favorite styled"
                  type="button"
                  (click)="stake()"
                >
                  Stake
                </button>
                <button
                  *ngIf="setStakeAmount == ''"
                  class="favorite styledDisabled"
                  type="button"
                >
                  Stake
                </button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> UNSTAKE </u><br />
                <br />Has to be exactly 0 or greater than 100.
              </p>
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setUnstakeAmount"
                  (ngModelChange)="setUnstake($event)"
                  type="number"
                  min="0"
                  max="100000000000"
                  step="1"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Unstake"
                />
              </div>

              <br />
              <div class="center-div">
                <button
                  *ngIf="setUnstakeAmount != ''"
                  class="favorite styled"
                  type="button"
                  (click)="unstake()"
                >
                  Unstake
                </button>
                <button
                  *ngIf="setUnstakeAmount == ''"
                  class="favorite styledDisabled"
                  type="button"
                >
                  Unstake
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> CLAIM STAKING REWARD</u> <br />

                <br />Potential Reward: {{ contractUsersRewardFromStaking }}
              </p>
              <br />
              <br />
              <br />
              <button
                *ngIf="contractUsersRewardFromStaking != '0'"
                class="favorite styled"
                type="button"
                (click)="claimRewards()"
              >
                Claim
              </button>
              <button
                *ngIf="contractUsersRewardFromStaking == '0'"
                class="favorite styledDisabled"
                type="button"
              >
                Claim
              </button>
            </div>
          </div>
        </div>

        <p><u> ALLOWANCE DASHBOARD </u></p>

        <div class="row">
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> Allowance </u><br />
                Allow others to spend your {{ contractSymbol }}
              </p>
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceAdd"
                  (ngModelChange)="allowanceAdd($event)"
                  type="text"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Address"
                />
              </div>
              <br />

              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceAddNum"
                  (ngModelChange)="allowanceAddNum($event)"
                  type="number"
                  min="0"
                  max="100000000000"
                  step="1"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Amount"
                />
              </div>

              <br />
              <div class="center-div">
                <button
                  *ngIf="setAllowanceAddNum != '' && setAllowanceAdd != ''"
                  class="favorite styled"
                  type="button"
                  (click)="setAllowance()"
                >
                  Create
                </button>
                <button
                  *ngIf="setAllowanceAddNum == '' || setAllowanceAdd == ''"
                  class="favorite styledDisabled"
                  type="button"
                >
                  Create
                </button>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> Check Allowance </u><br />
                See how much can be spent.
              </p>
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceCheck"
                  (ngModelChange)="allowanceCheck($event)"
                  type="text"
                  (ngModelChange)="setUnstake($event)"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Parent Address"
                />
              </div>
              <br />
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceCheck2"
                  (ngModelChange)="allowanceCheck2($event)"
                  type="text"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Spender Address"
                />
              </div>

              <br />
              <div class="center-div">
                <button
                  *ngIf="setAllowanceCheck != '' && setAllowanceCheck2 != ''"
                  class="favorite styled"
                  type="button"
                  (click)="getAllowance()"
                >
                  Check
                </button>
                <button
                  *ngIf="setAllowanceCheck == '' || setAllowanceCheck2 == ''"
                  class="favorite styledDisabled"
                  type="button"
                >
                  Check
                </button>
              </div>
              <p *ngIf="allowanceCheckFinal">
                Allowance :<br />
                {{ allowanceCheckFinal }} {{ contractSymbol }}
              </p>
            </div>
          </div>

          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> Increase Allowance </u><br />
                Add more to allowance.
              </p>
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceIncrease"
                  type="text"
                  (ngModelChange)="allowanceIncrease($event)"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Spender Address"
                />
              </div>
              <br />
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceIncreaseNum"
                  (ngModelChange)="allowanceIncreaseNum($event)"
                  type="number"
                  min="0"
                  max="100000000000"
                  step="1"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Amount To increase buy"
                />
              </div>

              <br />
              <div class="center-div">
                <button
                  *ngIf="
                    setAllowanceIncrease != '' && setAllowanceIncreaseNum != ''
                  "
                  class="favorite styled"
                  type="button"
                  (click)="IncreaseAllowance()"
                >
                  Increase
                </button>
                <button
                  *ngIf="
                    setAllowanceIncrease == '' || setAllowanceIncreaseNum == ''
                  "
                  class="favorite styledDisabled"
                  type="button"
                >
                  Increase
                </button>
                <br />
              </div>
              <p *ngIf="allowanceIncreaseFinal">
                Allowance : <br />{{ allowanceIncreaseFinal }}
                {{ contractSymbol }}
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card-body" id="manageCard">
              <p class="card-text" style="font-size: 1em">
                <u> Decrease Allowance </u><br />
                Subtract amount of allowance.
              </p>
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceDecrease"
                  (ngModelChange)="allowanceDecrease($event)"
                  type="text"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Address"
                />
              </div>
              <br />
              <div
                class="form-outline"
                id="mintInput"
                style="max-width: 75%; margin-left: auto; margin-right: auto"
              >
                <input
                  [ngModel]="setAllowanceDecreaseNum"
                  (ngModelChange)="allowanceDecreaseNum($event)"
                  type="number"
                  min="0"
                  max="100000000000"
                  step="1"
                  onfocus="this.previousValue = this.value"
                  onkeydown="if(event.key==='.'){event.preventDefault();} this.previousValue =this.value"
                  class="form-control"
                  placeholder="Amount To Buy"
                />
              </div>

              <br />
              <div class="center-div">
                <button
                  *ngIf="
                    setAllowanceDecrease != '' && setAllowanceDecreaseNum != ''
                  "
                  class="favorite styled"
                  type="button"
                  (click)="DecreaseAllowance()"
                >
                  Decrease
                </button>
                <button
                  *ngIf="
                    setAllowanceDecrease == '' || setAllowanceDecreaseNum == ''
                  "
                  class="favorite styledDisabled"
                  type="button"
                >
                  Decrease
                </button>
                <br />
              </div>
              <p *ngIf="allowanceDecreaseFinal">
                Allowance : <br />{{ allowanceDecreaseFinal }}
                {{ contractSymbol }}
              </p>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="this.userAddress == ''">
        <p style="color: red">
          MetaMask Not Connected. Please connect to BSC test net
        </p>
      </div>
      <div *ngIf="this.error">
        <p style="color: red">Found Error : {{ error }}</p>
      </div>
    </div>

    <div *ngIf="this.isLoading">
      <br />
      <div
        class="spinner-grow"
        style="width: 10em; height: 10em; color: #f0b90b"
        role="status"
      >
        <span class="visually-hidden">Loading...</span>
      </div>
      <br />
      <br />
      <br />

      <p style="font-size: 1.25em; color: #f0b90b">Loading...</p>
      <br />
    </div>
  </div>
</div>
